{% extends 'base.html.twig' %}

{% block title %}Edit
  {{ trick.name}}
  -
{% endblock %}

{% block body %}
  <header class="container-fluid d-none d-md-block"></header>

  <div class="container trick-content" id="content">
    <div class="row trick-front-image">
      <div class="col-2 offset-10 icons">
        <div class="d-flex justify-content-around">
          <div class="col-xs-6">
            <a class="trick-action align-middle" data-toggle="modal" data-target="#imageModal">
              <i class="fas fa-pencil-alt"></i>
            </a>
          </div>
          {% if trick.frontPhoto is not null %}
            <div class="col-xs-6">
              <a class="trick-action align-middle" data-toggle="modal" data-target="#front-img-del">
                <i class="far fa-trash-alt"></i>
              </a>
            </div>
          {% endif %}
        </div>
      </div>
      <div class="col-12 front-img">
        {% if trick.frontPhoto is not null %}
          <img alt='{{ trick.name }}' src="img/tricks/{{ trick.frontPhoto.adress }}" class="img-fluid">
        {% else %}
          <img alt="No photo" src="img/tricks/no-photo.png" class="img-fluid">
        {% endif %}
      </div>
    </div>

    <div class="d-flex justify-content-center">
      <button class="btn btn-primary add-media">Add medias</button>
    </div>
    <div class="row medias">
      {% for photo in trick.trickPhotos %}
        <div class="col-md-2">
          <div class="row">
            <img alt='{{ photo.adress }}' src="img/tricks/{{ photo.adress }}" class="img-fluid" data-toggle="modal" data-target="#modal-photo-{{ photo.id }}">
          </div>
          <div class="col-6 offset-6">
            <div class="row">
              <div class="col-6">
                <a href="#" class="trick-action align-middle">
                  <i class="fas fa-pencil-alt"></i>
                </a>
              </div>
              <div class="col-6">
                <a class="trick-action align-middle">
                  <i class="far fa-trash-alt"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      {% for video in trick.videos %}
        <div class="col-md-2">
          <div class="embed-responsive embed-responsive-4by3">
            {{ video.iframe|raw }}
          </div>
          <div class="col-6 offset-6">
            <div class="row">
              <div class="col-6">
                <a href="#" class="trick-action align-middle">
                  <i class="fas fa-pencil-alt"></i>
                </a>
              </div>
              <div class="col-6">
                <a class="trick-action align-middle">
                  <i class="far fa-trash-alt"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
    {% if trick.trickPhotos is not empty or trick.videos is not empty %}
      <div class="d-flex justify-content-center d-block d-md-none ">
        <button class="btn btn-primary show-medias ">Show medias</button>
      </div>
    {% endif %}
    <div class="row trick-form">
      <div class="col-md-8 offset-md-2">
        {{ form_start(trickForm) }}
        {{ form_errors(trickForm) }}
        <div class="row">
          <div class="col-md-8 form-group">
            {{ form_errors(trickForm.name) }}
            {{ form_widget(trickForm.name, {'attr': {'placeholder': 'Trick name'}}) }}
          </div>
          <div class="col-md-12 form-group">
            {{ form_errors(trickForm.description) }}
            {{ form_widget(trickForm.description, { 'attr': { 'placeholder': 'Trick description', 'rows': 8 }}
            )}}
          </div>
          <div class="col-md-2 col-6 offset-6 form-group">
            {{ form_errors(trickForm.trickGroup) }}
            {{ form_widget(trickForm.trickGroup) }}
          </div>
          <div class="col-md-2 offset-md-4 col-4 offset-1 form-group">
            <button type="button" class="form-control btn btn-danger" data-toggle="modal" data-target="#delTrick">Delete</button>
          </div>
          <div class="col-md-2 offset-md-0 col-4 offset-1 form-group">
            <button type="submit" class="form-control btn btn-primary">Save</button>
          </div>
        </div>
        {{ form_end(trickForm) }}
      </div>
    </div>
  </div>
  <!-- Delete trick modal -->
  <div class="modal fade" id="delTrick" tabindex="-1" role="dialog" aria-labelledby="DelTrickLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="DelTrickLabel">Delete the trick</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Are your sure you you want to delete this trick
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger">Delete</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Photo modals -->
  {% for photo in trick.trickPhotos %}
    <div class="modal fade" id="modal-photo-{{ photo.id }}" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <img src="img/tricks/{{photo.adress }}" class="img-fluid">
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
{% endblock %}